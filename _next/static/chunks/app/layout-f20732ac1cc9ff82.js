(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1188:function(e,t,r){Promise.resolve().then(r.t.bind(r,3385,23)),Promise.resolve().then(r.t.bind(r,9646,23)),Promise.resolve().then(r.bind(r,146)),Promise.resolve().then(r.bind(r,3779))},7907:function(e,t,r){"use strict";var n=r(5313);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},7447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return s},default:function(){return l}});let n=r(6921),a=r(8630),i=r(1749),o=n._(r(536)),s=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/tol-beta/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},l=i.Image},146:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(3827),a=r(8792),i=r(7447),o=r.n(i),s=r(7907),l=r(3779),u=r(4090);function c(){let e=(0,s.usePathname)(),{user:t,logout:r}=(0,l.useAuth)(),[i,c]=(0,u.useState)(!1),d=(0,u.useRef)(null);(0,u.useEffect)(()=>{function e(e){d.current&&!d.current.contains(e.target)&&c(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=async()=>{try{await r(),c(!1)}catch(e){console.error("Failed to log out:",e)}};return(0,n.jsx)("nav",{className:"bg-gray-800 text-white p-4",children:(0,n.jsx)("div",{className:"container mx-auto",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"flex space-x-4",children:[{path:"/",label:"Home"},{path:"/skill-tree",label:"Skill Tree"},{path:"/character-sheet",label:"Character Sheet"},{path:"/abilities",label:"Abilities"},{path:"/equipment",label:"Equipment"}].map(t=>(0,n.jsx)(a.default,{href:t.path,className:"px-4 py-2 rounded transition-colors ".concat(e===t.path?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:t.label},t.path))}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[t&&(0,n.jsx)("span",{className:"text-gray-300 text-sm",children:t.email}),(0,n.jsxs)("div",{className:"relative",ref:d,children:[(0,n.jsxs)("button",{onClick:()=>c(!i),className:"flex items-center space-x-2 focus:outline-none",children:[(0,n.jsx)(o(),{src:"/tol-beta/256px.png",alt:"Tree of Life Icon",width:32,height:32,className:"rounded-full"}),(0,n.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(i?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,n.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{href:"/my-characters",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",onClick:()=>c(!1),children:"My Characters"}),(0,n.jsx)("button",{onClick:h,className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Log Out"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{href:"/login",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",onClick:()=>c(!1),children:"Log In"}),(0,n.jsx)(a.default,{href:"/signup",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",onClick:()=>c(!1),children:"Create a New Account"})]})})]})]})]})})})}},3779:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return l},useAuth:function(){return u}});var n=r(3827),a=r(4090),i=r(7065),o=r(1221);let s=(0,a.createContext)({user:null,loading:!0,signUp:async()=>{throw Error("AuthProvider not initialized")},signIn:async()=>{throw Error("AuthProvider not initialized")},signInWithGoogle:async()=>{throw Error("AuthProvider not initialized")},logout:async()=>{throw Error("AuthProvider not initialized")},verifyEmail:async()=>{throw Error("AuthProvider not initialized")}});function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[u,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!o.I){c(!1);return}let e=(0,i.Aj)(o.I,e=>{l(e),c(!1)});return()=>e()},[]);let d=async(e,t)=>{if(!o.I)throw Error("Authentication service is not available");let r=await (0,i.Xb)(o.I,e,t);return await (0,i.w$)(r.user),r},h=async(e,t)=>{if(!o.I)throw Error("Authentication service is not available");await (0,i.e5)(o.I,e,t)},m=async()=>{if(!o.I)throw Error("Authentication service is not available");let e=new i.hJ;await (0,i.rh)(o.I,e)},f=async()=>{if(!o.I)throw Error("Authentication service is not available");await (0,i.w7)(o.I)},x=async()=>{if(!(null===o.I||void 0===o.I?void 0:o.I.currentUser))throw Error("No user logged in");await (0,i.w$)(o.I.currentUser)};return(0,n.jsx)(s.Provider,{value:{user:r,loading:u,signUp:d,signIn:h,signInWithGoogle:m,logout:f,verifyEmail:x},children:t})}let u=()=>(0,a.useContext)(s)},1221:function(e,t,r){"use strict";let n,a,i;r.d(t,{I:function(){return a},db:function(){return i}});var o=r(6142),s=r(7065),l=r(8121);n=(0,o.C6)().length?(0,o.C6)()[0]:(0,o.ZF)({apiKey:"dummy",authDomain:"dummy",projectId:"dummy",storageBucket:"dummy",messagingSenderId:"dummy",appId:"dummy",measurementId:"dummy"}),a=(0,s.v0)(n),i=(0,l.ad)(n)},3385:function(){},9646:function(e){e.exports={style:{fontFamily:"'__Inter_e57bb3', '__Inter_Fallback_e57bb3'",fontStyle:"normal"},className:"__className_e57bb3"}}},function(e){e.O(0,[358,657,897,792,749,971,69,744],function(){return e(e.s=1188)}),_N_E=e.O()}]);